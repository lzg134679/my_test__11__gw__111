template:
  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.electricity_charge_balance_1234
    sensor:
      - name: electricity_charge_balance_1234
        unique_id: electricity_charge_balance_1234
        state: "{{ states('sensor.electricity_charge_balance_1234') }}"
        state_class: total
        unit_of_measurement: "CNY"
        device_class: monetary

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.last_electricity_usage_1234
    sensor:
      - name: last_electricity_usage_1234
        unique_id: last_electricity_usage_1234
        state: "{{ states('sensor.last_electricity_usage_1234') }}"
        state_class: measurement
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.month_electricity_usage_1234
    sensor:
      - name: month_electricity_usage_1234
        unique_id: month_electricity_usage_1234
        state: "{{ states('sensor.month_electricity_usage_1234') }}"
        state_class: measurement
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.month_electricity_charge_1234
    sensor:
      - name: month_electricity_charge_1234
        unique_id: month_electricity_charge_1234
        state: "{{ states('sensor.month_electricity_charge_1234') }}"
        state_class: measurement
        unit_of_measurement: "CNY"
        device_class: monetary

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.yearly_electricity_usage_1234
    sensor:
      - name: yearly_electricity_usage_1234
        unique_id: yearly_electricity_usage_1234
        state: "{{ states('sensor.yearly_electricity_usage_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.yearly_electricity_charge_1234
    sensor:
      - name: yearly_electricity_charge_1234
        unique_id: yearly_electricity_charge_1234
        state: "{{ states('sensor.yearly_electricity_charge_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "CNY"
        device_class: monetary

  # 昨日分时段用电
  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.yesterday_valley_usage_1234
    sensor:
      - name: yesterday_valley_usage_1234
        unique_id: yesterday_valley_usage_1234
        state: "{{ states('sensor.yesterday_valley_usage_1234') }}"
        state_class: measurement
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.yesterday_flat_usage_1234
    sensor:
      - name: yesterday_flat_usage_1234
        unique_id: yesterday_flat_usage_1234
        state: "{{ states('sensor.yesterday_flat_usage_1234') }}"
        state_class: measurement
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.yesterday_peak_usage_1234
    sensor:
      - name: yesterday_peak_usage_1234
        unique_id: yesterday_peak_usage_1234
        state: "{{ states('sensor.yesterday_peak_usage_1234') }}"
        state_class: measurement
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.yesterday_sharp_usage_1234
    sensor:
      - name: yesterday_sharp_usage_1234
        unique_id: yesterday_sharp_usage_1234
        state: "{{ states('sensor.yesterday_sharp_usage_1234') }}"
        state_class: measurement
        unit_of_measurement: "kWh"
        device_class: energy

  # 当月分时段用电
  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.current_month_total_usage_1234
    sensor:
      - name: current_month_total_usage_1234
        unique_id: current_month_total_usage_1234
        state: "{{ states('sensor.current_month_total_usage_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.current_month_valley_usage_1234
    sensor:
      - name: current_month_valley_usage_1234
        unique_id: current_month_valley_usage_1234
        state: "{{ states('sensor.current_month_valley_usage_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.current_month_flat_usage_1234
    sensor:
      - name: current_month_flat_usage_1234
        unique_id: current_month_flat_usage_1234
        state: "{{ states('sensor.current_month_flat_usage_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.current_month_peak_usage_1234
    sensor:
      - name: current_month_peak_usage_1234
        unique_id: current_month_peak_usage_1234
        state: "{{ states('sensor.current_month_peak_usage_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "kWh"
        device_class: energy

  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.current_month_sharp_usage_1234
    sensor:
      - name: current_month_sharp_usage_1234
        unique_id: current_month_sharp_usage_1234
        state: "{{ states('sensor.current_month_sharp_usage_1234') }}"
        state_class: total_increasing
        unit_of_measurement: "kWh"
        device_class: energy

  # 本月1号用电历史（CSV 文本）
  - trigger:
      - platform: event
        event_type: state_changed
        event_data:
          entity_id: sensor.current_month_first_day_history_1234
    sensor:
      - name: current_month_first_day_history_1234
        unique_id: current_month_first_day_history_1234
        state: "{{ states('sensor.current_month_first_day_history_1234') }}"
        icon: mdi:calendar-start